include:
  - zakladatelskeDokumenty.yml
  - t_program.yml
---
sections:
  - uvod: Úvod ustavující schůze
progressive: False
---
sets: Spolek.schuze.program.there_are_any
code: |
  Spolek.schuze.program.there_are_any = True
  povinnyProgram = [[t_uvod.subject, False, False], [t_listina.subject, False, False], [t_stanovy.subject, True, False], [t_statutar.subject, False, True], [t_povereni.subject, False, False]]
  Spolek.schuze.program.clear()
  for polozka in povinnyProgram:
    Spolek.schuze.program.appendObject()
    Spolek.schuze.program[-1].important = dict(delete=False, edit=False)
    Spolek.schuze.program[-1].name.text = polozka[0]
    Spolek.schuze.program[-1].hlasovani = polozka[1]
    Spolek.schuze.program[-1].volba = polozka[2]
  Spolek.schuze.program.there_is_another = False
---
sets: Spolek.schuze.program[i].zapis
code: |
  povinnyProgramZapis = [[t_uvod.content, t_uvod.subject, False], [t_listina.content, t_listina.subject, False], [t_stanovy.content, t_stanovy.subject, False], [t_statutar.content, t_statutar.subject, True], [t_povereni.content, t_povereni.subject, False]]
  try:
    Spolek.schuze.program[i].zapis = povinnyProgramZapis[i][0]
    Spolek.schuze.program[i].volba = povinnyProgramZapis[i][2]
  except:
    Spolek.schuze.program[i].zapis = Spolek.schuze.program[i].obsah
---
mandatory: True
code: |
  the_task
  if the_task.ready():
    zapis
  else:
    waiting_screen
  all_done
---
code: |
  the_task = background_action("bg_task")
---
event: bg_task
code: |
  background_response(url_of(zapis))
---
event: waiting_screen
question: |
  Načítáme aktuální stav <div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
  </div>
reload: 1
---
mandatory: True
attachment:
  name: Zápis z ustavujici schůze
  filename: Zapis ustavujici schuze
  variable name: zapis
  docx template file: Schuze.docx
  update references: True
  valid formats:
    - docx
---
event: all_done
question: |
  Máme vše potřebné
subquestion: |
  Máme všechny potřebné odpovědi. Nyní si můžete vygenerovat zápis a pokračovat.
  
  ${zapis}