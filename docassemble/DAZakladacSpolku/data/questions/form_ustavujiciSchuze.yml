include:
  - zakladatelskeDokumenty.yml
  - t_program.yml
---
sections:
  - uvod: Úvod ustavující schůze
  - listina: Listina přítomných
progressive: False
---
mandatory: True
code: |
  uvod
  podklady
  listinaDone
  the_task
  if the_task.ready():
    zapis
  else:
    waiting_screen
  all_done
---
code: |
  the_task = background_action("bg_task")
---
event: bg_task
code: |
  background_response(url_of(zapis))
---
event: waiting_screen
question: |
  Načítáme aktuální stav <div class="spinner-border text-primary" role="status">
  <span class="visually-hidden">Loading...</span>
  </div>
reload: 1
---
##################### OTÁZKY
sets:
  - Spolek.schuze.svolavatel
  - Spolek.schuze.datumKonani
  - Spolek.schuze.datumSvolani
  - Spolek.schuze.forma
  - Spolek.schuze.obec
section: uvod
question: |
  Úvodní informace ke konání schůze
fields: 
  - code: |
      get_questions_from_nocodb(table_id="m69xije3ls6jr82", filter="(interview,eq,ustavujiciSchuze)~and(section,eq,uvod)")
continue button field: uvod
---
section: uvod
questions: |
  Chcete rovnou vyplnit zápis?
subquestion: |
  Pokud jste ustavující schůzi už konali, nebo chcete vyplnit zápis rovnou, můžete.

  Jinak si stáhněte podklady a zápis vyplňte až po schůzi, nebo na místě.
action buttons:
  - label: Stáhnout podklady na schůzi
    action: https://frankbold.org/poradna/spolky-a-zapojeni-verejnosti/spolky/zakladani-spolku/vzor/zapis-z-ustavujici-schuze-spolku
continue button field: podklady
---
section: listina
question: |
  Listina přítomných
subquestion: |
  Pokud máte listinu přítomných vyplněnou fyzicky, tuto část přeskočte.

  Upravit seznam přítomných:
  ${ Spolek.schuze.pritomni.table }

  ${ Spolek.schuze.pritomni.add_action() }
section: listina
continue button field: listinaDone
---
code: |
  seznamLidi = [{"jmeno":"Michal", "adresa": "Praha"}]
---
table: Spolek.schuze.pritomni.table
rows: seznamLidi
columns:
  - Jméno: |
      row_item.jmeno
  - Bydliště: |
      row_item.adresa
edit:
  - jmeno
---
################## VÝSTUP
mandatory: True
attachment:
  name: Zápis z ustavujici schůze
  filename: Zapis ustavujici schuze
  variable name: zapis
  docx template file: Schuze.docx
  update references: True
  valid formats:
    - docx
---
event: all_done
question: |
  Máme vše potřebné
subquestion: |
  Máme všechny potřebné odpovědi. Nyní si můžete vygenerovat zápis a pokračovat.
  
  ${zapis}